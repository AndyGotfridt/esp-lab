<!DOCTYPE html><html lang="en" class="h-100"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title data-i18n="header.title">LED Clock</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v7.1.0/css/all.css"/><link rel="stylesheet" href="/css/style.css"><script>window.I18N_REMOTE_URL = "https://andygotfridt.github.io/esp-lab/ui/lang";</script><script src="/js/app.js"></script></head><body class="d-flex flex-column h-100"><div class="main-container"><div class="header-card"><div class="row align-items-center"><div class="col col-md-6 col-12 d-flex justify-content-center align-items-center"><h1><i class="fa-solid fa-clock"></i><span data-i18n="header.title">LED CLOCK</span><span class="fs-10"><span data-i18n="header.by">by</span><strong>Andy Gotfridt</strong></span></h1></div><div class="col col-md-6 col-12 d-flex justify-content-center align-items-center gap-2 flex-wrap"><span id="updateBadge" class="badge bg-warning text-dark d-none" style="cursor:pointer" data-bs-toggle="modal" data-bs-target="#updateModal"><i class="fa-solid fa-circle-up"></i>&nbsp;<span id="updateVersion">UPDATE BADGE</span></span><select id="languageSelector" class="form-select form-select-sm" style="width:auto;font-size:14px;" onchange="changeLanguage(this.value)"><option value="es">ðŸ‡ªðŸ‡¸</option><option value="en">ðŸ‡ºðŸ‡¸</option></select><button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#advancedModal" data-i18n="header.advanced_settings" data-i18n-attr="title" title="Advanced Settings"><i class="fa-solid fa-gear"></i></button></div></div></div><div class="position-fixed top-0 end-0 p-3" style="z-index:9999"><div id="successToast" class="toast text-uppercase align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true"><div class="d-flex"><div class="toast-body"><i class="fa-solid fa-circle-check me-2"></i><span data-i18n="toasts.config_saved">Configuration saved automatically!</span></div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div></div></div><div class="content-row"><div class="row h-100 g-3"><div class="col-lg-6"><div class="row g-3"><div class="col-md-6 col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-palette"></i><span data-i18n="display_colors.title">Display Colors</span></h2><div class="d-flex gap-3 align-items-end"><div class="flex-fill text-center"><label class="form-label mb-2 d-block fw-bold"><i class="fa-solid fa-h"></i></label><input type="color" class="form-control form-control-color w-100" id="colorHours" value="#ff0000" style="height: 45px;"></div><div class="flex-fill text-center"><label class="form-label mb-2 d-block fw-bold"><i class="fa-solid fa-circle"></i></label><input type="color" class="form-control form-control-color w-100" id="colorSeparator" value="#0000ff" style="height: 45px;"></div><div class="flex-fill text-center"><label class="form-label mb-2 d-block fw-bold"><i class="fa-solid fa-m"></i></label><input type="color" class="form-control form-control-color w-100" id="colorMinutes" value="#00ff00" style="height: 45px;"></div></div></div></div></div><div class="col-md-6 col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-swatchbook"></i><span data-i18n="themes.title">Quick Themes</span></h2><div id="themesContainer" class="row g-2"></div></div></div></div><div class="col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-eye"></i><span data-i18n="preview.title">Preview</span></h2><div id="previewTime" class="fs-48 text-center bg-light rounded preview-time"><span id="previewHours" style="color:#ff0000">23</span><span id="previewSeparator" style="color:#0000ff">:</span><span id="previewMinutes" style="color:#00ff00">45</span></div></div></div></div></div></div><div class="col-lg-6"><div class="row g-3"><div class="col-md-6 col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-lightbulb"></i><span data-i18n="brightness.title">Brightness Control</span></h2><div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="autobrightness" checked><label class="form-check-label" for="autobrightness"><i class="fa-solid fa-wand-magic-sparkles"></i>&nbsp; <span data-i18n="brightness.auto_brightness">Automatic brightness</span>&nbsp; <i class="fa-solid fa-circle-info" data-bs-toggle="tooltip" data-bs-placement="bottom" data-i18n="brightness.auto_brightness_tooltip" data-i18n-attr="title" title="Requires LDR sensor connected to work properly"></i></label></div><div id="manualBrightnessControl" class="collapsible-section d-none"><div id="nightModeWarning" class="toast toast-warning d-flex align-items-start mb-3 d-none fs-13"><i class="fa-solid fa-moon me-2 mt-1"></i><strong class="text-uppercase"><span data-i18n="brightness.night_mode_warning">Night mode active:</span></strong><span data-i18n="brightness.night_mode_warning_text">Manual brightness changes will not apply until night schedule ends.</span></div><div class="slider-container"><div class="slider-label"><label class="form-label mb-0"><i class="fa-solid fa-brightness fa-lg"></i>&nbsp; <span data-i18n="brightness.manual_brightness">Manual brightness</span></label><span class="slider-value" id="brightnessValue">128</span></div><input type="range" class="form-range" id="brightness" min="0" max="255" value="128"></div></div><div id="autoBrightnessControls" class="collapsible-section"><div class="toast toast-info d-flex align-items-center mb-3 fs-13"><i class="fa-solid fa-light-ceiling fa-lg me-2"></i><div class="flex-grow-1"><strong class="text-uppercase"><span data-i18n="brightness.light">Light</span>: </strong>&nbsp; <span id="ldrPercentage"></span>&nbsp;% </div><span class="badge bg-primary text-uppercase"><span data-i18n="brightness.brightness">Brightness</span>:&nbsp; <strong id="currentBrightnessValue">--</strong></span></div><div class="slider-container"><div class="slider-label"><label class="form-label mb-0"><i class="fa-light fa-brightness fa-lg"></i>&nbsp; <span data-i18n="brightness.min_brightness">Minimum brightness</span></label><span class="slider-value" id="minBrightnessValue">20</span></div><input type="range" class="form-range" id="minBrightness" min="0" max="255" value="20"></div><div class="slider-container"><div class="slider-label"><label class="form-label mb-0"><i class="fa-solid fa-brightness fa-lg"></i>&nbsp; <span data-i18n="brightness.max_brightness">Maximum brightness</span></label><span class="slider-value" id="maxBrightnessValue">255</span></div><input type="range" class="form-range" id="maxBrightness" min="0" max="255" value="255"></div></div></div></div></div><div class="col-md-6 col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-moon"></i><span data-i18n="night_mode.title">Night Mode</span>&nbsp; <i class="fa-solid fa-circle-info" data-bs-toggle="tooltip" data-bs-placement="bottom" data-i18n="night_mode.tooltip" data-i18n-attr="title" title="Night mode automatically reduces brightness during configured schedule"></i></h2><div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="scheduleEnabled" checked><label class="form-check-label" for="scheduleEnabled"><span data-i18n="night_mode.enabled">Enabled</span></label></div><div class="row g-2 mb-2"><div class="col-12"><div class="slider-container"><div class="slider-label"><label class="form-label mb-0"><i class="fa-solid fa-brightness fa-lg"></i>&nbsp; <span data-i18n="night_mode.night_brightness">Night brightness</span></label><span class="slider-value" id="nightBrightnessValue">30</span></div><input type="range" class="form-range" id="nightBrightness" min="0" max="255" value="30"></div></div><div class="col-6"><label class="form-label fw-bold"><i class="fa-solid fa-face-sleeping"></i>&nbsp; <span data-i18n="night_mode.start_time">Start</span></label><input type="time" class="form-control" id="timeOff" value="23:00"></div><div class="col-6"><label class="form-label fw-bold"><i class="fa-sharp fa-solid fa-sunrise"></i>&nbsp; <span data-i18n="night_mode.end_time">End</span></label><input type="time" class="form-control" id="timeOn" value="07:00"></div></div></div></div></div><div class="col-md-6 col-12"><div class="card shadow-sm h-100 rounded-4"><div class="card-body"><h2 class="section-title"><i class="fa-solid fa-microchip"></i><span data-i18n="system.title">System Information</span></h2><div class="row g-3"><div class="col-6"><div id="wifiStatusBadge" class="info-badge bg-success"><i class="fa-solid fa-wifi fa-lg"></i><div class="info-content"><small class="info-label">WiFi</small><div class="info-value" id="wifiSSID">Loading...</div></div></div></div><div class="col-6"><a id="mdnsHostnameLink" href="#" target="_blank" class="text-decoration-none"><div class="info-badge bg-primary"><i class="fa-solid fa-globe fa-lg"></i><div class="info-content"><small class="info-label">URL</small><div class="info-value" id="hostnameText"></div></div></div></a></div><div class="col-6"><div class="info-badge firmware-badge bg-info"><i class="fa-solid fa-microchip fa-lg"></i><div class="info-content"><small class="info-label">Firmware</small><div class="info-value" id="firmwareVersion">v0.0.0</div></div></div></div><div class="col-6"><div class="info-badge bg-warning"><i class="fa-solid fa-satellite-dish fa-lg"></i><div class="info-content"><small class="info-label" data-i18n="system.branch">Channel</small><div class="info-value" id="updateChannelDisplay">stable</div></div></div></div></div></div></div></div><div class="col-12"><div class="d-grid"><button type="button" class="btn btn-success btn-lg" onclick="saveConfig()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-i18n="buttons.save_tooltip" data-i18n-attr="title" title="Changes are automatically saved after 500ms"><i class="fa-solid fa-floppy-disk"></i>&nbsp;<span data-i18n="buttons.save"></span></button></div></div></div></div></div></div></div><footer class="text-center py-3 mt-auto text-white-50 fs-14"><span data-i18n="footer.developed_with">Developed with</span>&nbsp; <i class="fa-solid fa-heart" style="color:#ff6b6b;animation:heartbeat 1.5s ease-in-out infinite"></i>&nbsp; <span data-i18n="footer.by">by</span>&nbsp;<strong>Andy Gotfridt</strong>&nbsp;v<strong id="footerVersion"><i class="fa-solid fa-spinner fa-spin"></i></strong></footer><div class="modal fade" id="advancedModal" tabindex="-1"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header" style="background:var(--primary-gradient);color:white"><h5 class="modal-title"><i class="fa-solid fa-gear"></i>&nbsp;<span data-i18n="modal_advanced.title">Settings</span></h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="row"><div class="col-md-6 col-12"><h6 class="text-muted mb-3"><i class="fa-solid fa-earth-americas"></i>&nbsp;<span data-i18n="modal_advanced.timezone.title">Time Zone</span></h6><label class="form-label"><i class="fa-solid fa-globe"></i>&nbsp;<span data-i18n="modal_advanced.timezone.label">Select your time zone</span></label><input type="text" class="form-control mb-2 fs-14" id="timezoneSearch" data-i18n="modal_advanced.timezone.search_placeholder" data-i18n-attr="placeholder" placeholder="Search city or country..."><select class="form-select fs-14 mb-3" id="timezoneSelect" size="6"><optgroup data-i18n="modal_advanced.timezone.groups.america" label="AmÃ©rica"><option value="-10">Hawaii (GMT-10)</option><option value="-8">Los Angeles, Vancouver (GMT-8)</option><option value="-7">Denver, Phoenix (GMT-7)</option><option value="-6">Ciudad de MÃ©xico, Chicago (GMT-6)</option><option value="-5">BogotÃ¡, Lima, Nueva York (GMT-5)</option><option value="-4">Caracas, La Paz, Santiago (GMT-4)</option><option value="-3" selected>Buenos Aires, SÃ£o Paulo (GMT-3)</option><option value="-2">Mid-Atlantic (GMT-2)</option></optgroup><optgroup data-i18n="modal_advanced.timezone.groups.europe_africa" label="Europa & Ãfrica"><option value="0">Londres, Lisboa (GMT+0)</option><option value="1">Madrid, ParÃ­s, BerlÃ­n (GMT+1)</option><option value="2">Atenas, El Cairo, Johannesburgo (GMT+2)</option><option value="3">MoscÃº, Nairobi (GMT+3)</option></optgroup><optgroup data-i18n="modal_advanced.timezone.groups.asia_oceania" label="Asia & OceanÃ­a"><option value="4">Dubai (GMT+4)</option><option value="5">Islamabad, Karachi (GMT+5)</option><option value="5.5">Mumbai, New Delhi (GMT+5:30)</option><option value="7">Bangkok, Jakarta (GMT+7)</option><option value="8">Beijing, Hong Kong, Singapur (GMT+8)</option><option value="9">Tokyo, SeÃºl (GMT+9)</option><option value="10">Sydney, Melbourne (GMT+10)</option><option value="12">Auckland (GMT+12)</option></optgroup></select><input type="hidden" id="timezoneOffset" value="-3"><div class="mt-3"><label class="form-label"><i class="fa-sharp fa-solid fa-server"></i>&nbsp; <span data-i18n="modal_advanced.ntp.label">NTP Server</span></label><input type="text" class="form-control fs-14" id="ntpServer" value="pool.ntp.org" placeholder="pool.ntp.org"><small class="text-muted" data-i18n="modal_advanced.ntp.help_text">Server for time synchronization</small></div></div><div class="col-md-6 col-12"><h6 class="text-muted mb-3"><i class="fa-solid fa-circle-up"></i>&nbsp; <span data-i18n="modal_advanced.ota.title">OTA Updates</span></h6><div class="mb-3"><label class="form-label"><i class="fa-solid fa-server"></i>&nbsp; <span data-i18n="modal_advanced.ota.server_label">Update server</span></label><input type="text" class="form-control fs-14" id="updateServerUrl" data-i18n="modal_advanced.ota.server_placeholder" data-i18n-attr="placeholder" placeholder="https://andygotfridt.github.io/esp-lab/firmware/updates.json"><small class="text-muted" data-i18n="modal_advanced.ota.server_help">Full URL of updates.json file</small></div><div class="mb-3"><label class="form-label"><i class="fa-solid fa-code-branch"></i>&nbsp; <span data-i18n="modal_advanced.ota.channel_label">Canal de actualizaciones</span></label><select class="form-select fs-14" id="updateChannel"><option value="stable" data-i18n="modal_advanced.ota.channels.stable">Stable (Estable)</option><option value="beta" data-i18n="modal_advanced.ota.channels.beta">Beta (Testing)</option><option value="alpha" data-i18n="modal_advanced.ota.channels.alpha">Alpha (Development)</option><option value="hotfix" data-i18n="modal_advanced.ota.channels.hotfix">Hotfix (Urgent fixes)</option></select><small class="text-muted" data-i18n="modal_advanced.ota.channel_help">Cambia el canal para recibir versiones especÃ­ficas</small></div></div></div><hr><div class="row"><div class="col-12"><div class="toast toast-warning d-flex align-items-start mb-3 fs-13"><i class="fa-solid fa-triangle-exclamation me-2 mt-1"></i><p class="text-uppercase m-0"><span data-i18n="modal_advanced.hardware.warning" class="fw-bold">Advertencia</span>: <span data-i18n="modal_advanced.hardware.warning_text">Cambiar los pines requiere reiniciar el ESP32 y reconectar el hardware correctamente.</span></p></div><h6 class="text-muted mb-3"><i class="fa-solid fa-microchip"></i>&nbsp; <span data-i18n="modal_advanced.hardware.title">Pines de Hardware</span></h6></div><div class="col-md-6 col-12"><div class="row g-3 mb-3"><div class="col-6"><label class="form-label fw-bold"><i class="fa-solid fa-lightbulb"></i>&nbsp; <span data-i18n="modal_advanced.hardware.led_pin">Pin LEDs</span></label><input type="number" class="form-control" id="ledPin" value="2" min="0" max="10"><small class="text-muted">GPIO: 0-7, 10</small></div><div class="col-6"><label class="form-label fw-bold"><i class="fa-solid fa-sun"></i>&nbsp; <span data-i18n="modal_advanced.hardware.ldr_pin">LDR Pin</span></label><input type="number" class="form-control" id="ldrPin" value="0" min="0" max="4"><small class="text-muted">ADC: 0-4</small></div></div></div><div class="col-md-6 col-12"><div class="mb-3"><label class="form-label fw-bold"><i class="fa-solid fa-list-ol"></i>&nbsp; <span data-i18n="modal_advanced.hardware.num_leds">Total LEDs</span></label><input type="number" class="form-control" id="numLeds" value="62" min="1" max="500"><small class="text-muted" data-i18n="modal_advanced.hardware.num_leds_help">Total number of LEDs in your strip</small><button type="button" class="btn btn-outline-primary w-100 text-uppercase mt-1" onclick="testLeds()"><i class="fa-solid fa-lightbulb"></i>&nbsp;<span data-i18n="buttons.test_leds">Test LEDs</span></button></div></div></div><hr><h6 class="text-muted mb-3"><i class="fa-solid fa-wifi"></i>&nbsp; <span data-i18n="modal_advanced.wifi.title">WiFi Network</span></h6><button type="button" class="btn btn-outline-danger w-100 mb-3" onclick="resetWifi()" data-bs-dismiss="modal"><i class="fa-solid fa-rotate-right"></i>&nbsp; <span data-i18n="modal_advanced.wifi.reconfigure">Reconfigure WiFi</span></button></div><div class="modal-footer"><button type="button" class="btn btn-mg btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"></i>&nbsp;<span data-i18n="buttons.close">Close</span></button><button type="button" class="btn btn-md btn-success" onclick="saveAdvancedConfig()" data-bs-dismiss="modal"><i class="fa-solid fa-floppy-disk"></i>&nbsp; <span data-i18n="buttons.save_changes">Save Changes</span></button></div></div></div></div><div class="modal fade" id="updateModal" tabindex="-1"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white"><h5 class="modal-title"><i class="fa-solid fa-circle-up"></i>&nbsp; <span data-i18n="modal_update.title">New Version Available</span></h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="text-center mb-3"><h3 class="mb-1">Version <span id="updateNewVersion">--</span></h3><small class="text-muted"><span data-i18n="modal_update.current_version">Current version:</span><strong id="updateCurrentVersion">--</strong></small></div><div class="mb-3"><p class="fs-4 text-uppercase" data-i18n="modal_update.changelog">Changelog</p><code id="updateReleaseNotes" class="mt-2" data-i18n="modal_update.loading"> Cargando informaciÃ³n... </code></div><hr><div class="toast toast-warning mb-3 fs-13"><i class="fa-solid fa-info-circle"></i>&nbsp;<span data-i18n="modal_update.info_text">Se instalarÃ¡ el firmware automÃ¡ticamente desde GitHub. No desconectes el dispositivo durante el proceso (~60 segundos).</span></div><div class="d-grid gap-2"><button type="button" class="btn btn-success btn-lg" id="updateAutoBtn" onclick="autoUpdateFirmware()"><i class="fa-solid fa-bolt"></i>&nbsp;<span data-i18n="modal_update.auto_update_button">Update Automatically</span></button><a id="updateDownloadBtn" href="#" target="_blank" class="btn btn-outline-secondary btn-sm"><i class="fa-solid fa-download"></i>&nbsp;<span data-i18n="modal_update.download_button">Descargar .bin (opcional)</span></a></div><div id="updateProgress" class="d-none mb-3"><div class="progress" style="height: 25px;"><div id="updateProgressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">0% </div></div><small id="updateStatus" class="text-muted d-block mt-2" data-i18n="update_progress.starting">Starting update...</small></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="buttons.later">Later</button></div></div></div></div><div class="modal fade" id="updatePathModal" tabindex="-1"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header" style="background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white"><h5 class="modal-title text-uppercase"><i class="fa-solid fa-route"></i>&nbsp;<span data-i18n="modal_update_path.title">Staged Update</span></h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="text-center mb-3"><h4 class="mb-1"><span data-i18n="modal_update_path.latest_version">Latest Version:</span><span id="pathTargetVersion" class="text-primary">--</span></h4><small class="text-muted"><span data-i18n="modal_update_path.current_version">Current Version:</span><strong id="pathCurrentVersion">--</strong></small></div><div class="toast toast-warning"><i class="fa-solid fa-triangle-exclamation me-2"></i><strong data-i18n="modal_update_path.warning_title">Staged update required</strong><br><small data-i18n="modal_update_path.warning_text">This version requires intermediate updates due to major firmware changes or version-specific assets.</small></div><div class="mb-3"><p class="fs-5 fw-bold"><i class="fa-solid fa-list-ol"></i>&nbsp; <span data-i18n="modal_update_path.steps_title">Update Steps:</span></p><div id="updatePathSteps" class="list-group"></div></div><div class="d-grid gap-2 mt-3"><button type="button" class="btn btn-success btn-lg" id="startPathUpdateBtn" onclick="startPathUpdate()"><i class="fa-solid fa-play"></i>&nbsp; <span data-i18n="modal_update_path.start_button">Start Update to First Step</span></button><button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"></i>&nbsp;<span data-i18n="buttons.cancel">Cancel</span></button></div><div id="pathUpdateProgress" class="d-none mt-3"><div class="progress" style="height: 25px;"><div id="pathUpdateProgressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">0% </div></div><small id="pathUpdateStatus" class="text-muted d-block mt-2" data-i18n="update_progress.starting">Starting update...</small></div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script></body></html>